
VAR SelectedPatient = SELECTEDVALUE(Dim_Patient[Code_Patient])
VAR BMI = 
    CALCULATE(
        SELECTEDVALUE('Fact_Performance_soins_m√©dicaux'[BMI]),
        USERELATIONSHIP('Fact_Performance_soins_m√©dicaux'[Patient_fk], Dim_Patient[Patient_pk])
    )
RETURN
IF(
    ISBLANK(SelectedPatient),
    "üßç Please select a patient",
    "üßÆ " & FORMAT(BMI, "0.0") & " ‚Üí " & 
    SWITCH(
        TRUE(),
        ISBLANK(BMI), "Not available",
        BMI < 18.5, "üü° Underweight",
        BMI < 25, "‚úÖ Normal",
        BMI < 30, "üü† Overweight",
        BMI < 35, "üî¥ Moderate obesity",
        BMI < 40, "üî¥ Severe obesity",
        "‚ö†Ô∏è Morbid obesity"
    )
)
